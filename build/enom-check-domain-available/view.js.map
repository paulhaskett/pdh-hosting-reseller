{"version":3,"file":"enom-check-domain-available/view.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;AACxB,IAAI,OAAOC,YAAY,KAAK,WAAW,EAAE;EACxCF,OAAO,CAACG,KAAK,CAAC,+BAA+B,CAAC;AAE/C;AACAH,OAAO,CAACC,GAAG,CAACC,YAAY,CAACE,KAAK,CAAC;AAC/BJ,OAAO,CAACC,GAAG,CAACC,YAAY,CAACG,OAAO,CAAC;AACjCL,OAAO,CAACC,GAAG,CAACC,YAAY,CAACI,IAAI,CAAC;;AAE9B;AACAC,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,EAAE,MAAM;EACnDD,QAAQ,CAACE,gBAAgB,CAAC,qBAAqB,CAAC,CAACC,OAAO,CAACC,IAAI,IAAI;IAChE,MAAMC,SAAS,GAAGD,IAAI,CAACE,aAAa,CAAC,uBAAuB,CAAC,IAAI,CAAC,MAAM;MACvE,MAAMC,GAAG,GAAGP,QAAQ,CAACQ,aAAa,CAAC,KAAK,CAAC;MACzCD,GAAG,CAACE,SAAS,GAAG,sBAAsB;MACtCL,IAAI,CAACM,WAAW,CAACH,GAAG,CAAC;MACrB,OAAOA,GAAG;IACX,CAAC,EAAE,CAAC;IAEJH,IAAI,CAACH,gBAAgB,CAAC,QAAQ,EAAE,MAAOU,CAAC,IAAK;MAC5CA,CAAC,CAACC,cAAc,CAAC,CAAC;MAClB,MAAMC,WAAW,GAAGT,IAAI,CAACE,aAAa,CAAC,sBAAsB,CAAC;MAC9D,MAAMQ,SAAS,GAAGV,IAAI,CAACE,aAAa,CAAC,oBAAoB,CAAC;MAC1D,MAAMS,MAAM,GAAGF,WAAW,CAACG,KAAK,CAACC,IAAI,CAAC,CAAC;MACvC,MAAMC,GAAG,GAAGJ,SAAS,CAACE,KAAK;MAC3B,MAAMG,WAAW,GAAGnB,QAAQ,CAACoB,cAAc,CAAC,aAAa,CAAC;MAE1D,IAAI,CAACL,MAAM,EAAE,OAAOV,SAAS,CAACgB,WAAW,GAAG,6BAA6B;MAEzEhB,SAAS,CAACgB,WAAW,GAAG,WAAW;MAEnC,IAAI;QACH,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,mCAAmC,EAAE;UACjEC,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YACR,cAAc,EAAE,kBAAkB;YAClC,YAAY,EAAE9B,YAAY,CAACE;UAC5B,CAAC;UACD6B,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YAAEb,MAAM;YAAEG;UAAI,CAAC;QACrC,CAAC,CAAC;QACF,MAAMW,IAAI,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;QAClC,MAAMC,MAAM,GAAGF,IAAI;QACnBpC,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEqC,MAAM,CAAC;QAC7B,IAAIA,MAAM,CAACC,OAAO,KAAK,sBAAsB,EAAE;UAC9CC,SAAS,GAAG,KAAK;QAClB,CAAC,MAAM;UACNA,SAAS,GAAG,IAAI;QACjB;QACAxC,OAAO,CAACC,GAAG,CAACqC,MAAM,CAACC,OAAO,CAAC;QAC3BvC,OAAO,CAACC,GAAG,CAACuC,SAAS,CAAC;QAEtB,IAAIA,SAAS,EAAE;UACd5B,SAAS,CAACgB,WAAW,GAAG,YAAYU,MAAM,CAACG,UAAU,iBAAiB;UACtE;;UAIA,IAAIf,WAAW,EAAE;YAChB;;YAEAA,WAAW,CAACH,KAAK,GAAGe,MAAM,CAACG,UAAU;UAEtC,CAAC,MAAM;YACN,MAAMC,MAAM,GAAGnC,QAAQ,CAACQ,aAAa,CAAC,GAAG,CAAC;YAC1C2B,MAAM,CAACd,WAAW,GAAG,+BAA+B;YACpDc,MAAM,CAACC,IAAI,GAAG,4CAA4C,GAAGC,kBAAkB,CAACN,MAAM,CAACG,UAAU,CAAC;YAClGC,MAAM,CAAC1B,SAAS,GAAG,wCAAwC;YAC3D,MAAM6B,eAAe,GAAGtC,QAAQ,CAACQ,aAAa,CAAC,KAAK,CAAC;YACrD8B,eAAe,CAAC5B,WAAW,CAACyB,MAAM,CAAC;YACnC9B,SAAS,CAACK,WAAW,CAAC4B,eAAe,CAAC;UACvC;QAID,CAAC,MAAM;UACNjC,SAAS,CAACgB,WAAW,GAAG,YAAYU,MAAM,CAACG,UAAU,YAAY;UACjE,IAAIf,WAAW,EAAE;YAChBA,WAAW,CAACH,KAAK,GAAG,EAAE;UACvB;QACD;MAGD,CAAC,CAAC,OAAOuB,GAAG,EAAE;QACblC,SAAS,CAACgB,WAAW,GAAG,wBAAwB;MACjD;IACD,CAAC,CAAC;EACH,CAAC,CAAC;AACH,CAAC,CAAC;;AAKF,8B","sources":["webpack://pdh-hosting-reseller/./src/enom-check-domain-available/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any\n * JavaScript running in the front-end, then you should delete this file and remove\n * the `viewScript` property from `block.json`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\nconsole.log(\"this ran \")\nif (typeof DomainWidget === 'undefined') {\n\tconsole.error('DomainWidget object not found')\n\n}\nconsole.log(DomainWidget.token)\nconsole.log(DomainWidget.restUrl)\nconsole.log(DomainWidget.name)\n\n/* eslint-disable no-console */\ndocument.addEventListener('DOMContentLoaded', () => {\n\tdocument.querySelectorAll('.domain-search-form').forEach(form => {\n\t\tconst resultDiv = form.querySelector('.domain-search-result') || (() => {\n\t\t\tconst div = document.createElement('div')\n\t\t\tdiv.className = 'domain-search-result'\n\t\t\tform.appendChild(div)\n\t\t\treturn div\n\t\t})()\n\n\t\tform.addEventListener('submit', async (e) => {\n\t\t\te.preventDefault()\n\t\t\tconst domainInput = form.querySelector('input[name=\"domain\"]')\n\t\t\tconst tldSelect = form.querySelector('select[name=\"tld\"]')\n\t\t\tconst domain = domainInput.value.trim()\n\t\t\tconst tld = tldSelect.value\n\t\t\tconst domain_name = document.getElementById('domain_name')\n\n\t\t\tif (!domain) return resultDiv.textContent = \"Please enter a valid domain\"\n\n\t\t\tresultDiv.textContent = 'Checking…'\n\n\t\t\ttry {\n\t\t\t\tconst response = await fetch('/wp-json/pdh-enom/v2/check-domain', {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t'X-WP-Nonce': DomainWidget.token\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({ domain, tld })\n\t\t\t\t})\n\t\t\t\tconst data = await response.json()\n\t\t\t\tconst result = data\n\t\t\t\tconsole.log('result', result)\n\t\t\t\tif (result.RRPText === 'Domain not available') {\n\t\t\t\t\tavailable = false\n\t\t\t\t} else {\n\t\t\t\t\tavailable = true\n\t\t\t\t}\n\t\t\t\tconsole.log(result.RRPText)\n\t\t\t\tconsole.log(available)\n\n\t\t\t\tif (available) {\n\t\t\t\t\tresultDiv.textContent = `✅ Domain ${result.DomainName} is available! `\n\t\t\t\t\t//check if the product domain name field exists if not ask if user wants to register domain and forward them to the domain single product page\n\n\n\n\t\t\t\t\tif (domain_name) {\n\t\t\t\t\t\t// add the domain name to product field\n\n\t\t\t\t\t\tdomain_name.value = result.DomainName\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst button = document.createElement('a')\n\t\t\t\t\t\tbutton.textContent = 'Configure Domain Registration'\n\t\t\t\t\t\tbutton.href = '/product/domain-registration/?domain_name=' + encodeURIComponent(result.DomainName)\n\t\t\t\t\t\tbutton.className = 'wp-element-button configure-domain-btn'\n\t\t\t\t\t\tconst buttonContainer = document.createElement('div')\n\t\t\t\t\t\tbuttonContainer.appendChild(button)\n\t\t\t\t\t\tresultDiv.appendChild(buttonContainer)\n\t\t\t\t\t}\n\n\n\n\t\t\t\t} else {\n\t\t\t\t\tresultDiv.textContent = `❌ Domain ${result.DomainName} is taken.`\n\t\t\t\t\tif (domain_name) {\n\t\t\t\t\t\tdomain_name.value = ''\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t} catch (err) {\n\t\t\t\tresultDiv.textContent = 'Error checking domain.'\n\t\t\t}\n\t\t})\n\t})\n})\n\n\n\n\n/* eslint-enable no-console */\n"],"names":["console","log","DomainWidget","error","token","restUrl","name","document","addEventListener","querySelectorAll","forEach","form","resultDiv","querySelector","div","createElement","className","appendChild","e","preventDefault","domainInput","tldSelect","domain","value","trim","tld","domain_name","getElementById","textContent","response","fetch","method","headers","body","JSON","stringify","data","json","result","RRPText","available","DomainName","button","href","encodeURIComponent","buttonContainer","err"],"sourceRoot":""}